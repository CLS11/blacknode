#!/bin/bash

exploit_target(){
	TARGET="$1"
	NODE="$NETWORK_DIR/$TARGET"

	if [ ! -d "$NODE" ]; then
		echo "Target not foud"
		return
	fi
	SECURITY=$(cat "$NODE/security_level")

	if [ "$SECURITY" -le 2 ]; then
		echo "Compromised" > "$NODE/status"
		echo "Exploit successful"
		log_action "Exploit success on $TARGET"
	else
		increase_trace
		echo "Exploit failed. Trace increased."
		log_action "Exploit failed on $TARGET"
	fi
}
